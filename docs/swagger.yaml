swagger: "2.0"
info:
  description: "API Documentation for Keerja Backend. This documentation covers all available endpoints for the Keerja platform, including authentication, user management, job postings, applications, company management, and admin features."
  version: "1.0.0"
  title: "Keerja Backend API"
  contact:
    email: "dev@keerja.com"
host: "localhost:8080"
basePath: "/api/v1"
tags:
  - name: "Auth"
    description: "Authentication and Authorization"
  - name: "User"
    description: "User Profile and Management"
  - name: "Job"
    description: "Job Posting and Search"
  - name: "Application"
    description: "Job Applications Management"
  - name: "Company"
    description: "Company Profile and Management"
  - name: "Master"
    description: "Master Data (Locations, Industries, Skills)"
  - name: "Admin"
    description: "Admin Dashboard and Moderation"
  - name: "Notification"
    description: "Push Notifications and Device Tokens"
  - name: "Chat"
    description: "Messaging and Conversations"

schemes:
  - "http"
  - "https"

securityDefinitions:
  Bearer:
    type: "apiKey"
    name: "Authorization"
    in: "header"
    description: "Enter your Bearer token in the format **Bearer &lt;token&gt;**"

paths:
  # ==========================================================
  # AUTH ENDPOINTS
  # ==========================================================
  /auth/register:
    post:
      tags: ["Auth"]
      summary: "Register a new user"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/RegisterRequest"
      responses:
        201:
          description: "User registered successfully"
        400:
          description: "Invalid input"

  /auth/login:
    post:
      tags: ["Auth"]
      summary: "Login"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/LoginRequest"
      responses:
        200:
          description: "Login successful"
          schema:
            $ref: "#/definitions/AuthResponse"
        401:
          description: "Invalid credentials"

  /auth/verify-email:
    post:
      tags: ["Auth"]
      summary: "Verify Email"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/VerifyEmailRequest"
      responses:
        200:
          description: "Email verified"

  /auth/forgot-password:
    post:
      tags: ["Auth"]
      summary: "Forgot Password"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ForgotPasswordRequest"
      responses:
        200:
          description: "Reset email sent"

  /auth/reset-password:
    post:
      tags: ["Auth"]
      summary: "Reset Password"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ResetPasswordRequest"
      responses:
        200:
          description: "Password reset successfully"

  /auth/refresh-token:
    post:
      tags: ["Auth"]
      summary: "Refresh Access Token"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/RefreshTokenRequest"
      responses:
        200:
          description: "Token refreshed"
          schema:
            $ref: "#/definitions/AuthResponse"

  /auth/logout:
    post:
      tags: ["Auth"]
      summary: "Logout"
      security:
        - Bearer: []
      responses:
        200:
          description: "Logged out successfully"

  /auth/register-otp:
    post:
      tags: ["Auth"]
      summary: "Register with OTP"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/RegisterWithOTPRequest"
      responses:
        201:
          description: "Registration initiated, OTP sent"

  /auth/verify-email-otp:
    post:
      tags: ["Auth"]
      summary: "Verify Email with OTP"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/VerifyEmailOTPRequest"
      responses:
        200:
          description: "Email verified"

  /auth/resend-otp:
    post:
      tags: ["Auth"]
      summary: "Resend OTP"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ResendOTPRequest"
      responses:
        200:
          description: "OTP resent"

  /auth/forgot-password-otp:
    post:
      tags: ["Auth"]
      summary: "Forgot Password (OTP)"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ForgotPasswordOTPRequest"
      responses:
        200:
          description: "OTP sent"

  /auth/reset-password-otp:
    post:
      tags: ["Auth"]
      summary: "Reset Password with OTP"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ResetPasswordOTPRequest"
      responses:
        200:
          description: "Password reset successfully"

  /auth/login-remember:
    post:
      tags: ["Auth"]
      summary: "Login with Remember Me"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            required: ["email", "password"]
            properties:
              email:
                type: string
                format: email
              password:
                type: string
              remember_me:
                type: boolean
              device_id:
                type: string
      responses:
        200:
          description: "Login successful (returns access and refresh tokens)"

  /auth/refresh:
    post:
      tags: ["Auth"]
      summary: "Refresh Access Token"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            required: ["refresh_token"]
            properties:
              refresh_token:
                type: string
      responses:
        200:
          description: "Token refreshed (returns new access and refresh tokens)"

  /auth/devices:
    get:
      tags: ["Auth"]
      summary: "List Active Devices"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of active device sessions"

  /auth/devices/revoke:
    post:
      tags: ["Auth"]
      summary: "Revoke Device Session"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            required: ["device_id"]
            properties:
              device_id:
                type: string
      responses:
        200:
          description: "Device session revoked"

  /auth/logout-all:
    post:
      tags: ["Auth"]
      summary: "Logout From All Devices"
      security:
        - Bearer: []
      responses:
        200:
          description: "Logged out from all devices"

  /auth/admin/login:
    post:
      tags: ["Auth"]
      summary: "Admin Login"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/AdminLoginRequest"
      responses:
        200:
          description: "Admin login successful"
          schema:
            $ref: "#/definitions/AuthResponse"

  /auth/admin/logout:
    post:
      tags: ["Auth"]
      summary: "Admin Logout"
      security:
        - Bearer: []
      responses:
        200:
          description: "Admin logged out"

  # ==========================================================
  # USER ENDPOINTS
  # ==========================================================
  /users/me:
    get:
      tags: ["User"]
      summary: "Get My Profile"
      security:
        - Bearer: []
      parameters:
        - in: "query"
          name: "include"
          type: "string"
          description: "Include related data (e.g., 'educations,skills,projects' or 'all')"
      responses:
        200:
          description: "User profile data"
          schema:
            $ref: "#/definitions/UserProfile"
    put:
      tags: ["User"]
      summary: "Update My Profile"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateProfileRequest"
      responses:
        200:
          description: "Profile updated"

  /users/me/preferences:
    get:
      tags: ["User"]
      summary: "Get User Preferences"
      security:
        - Bearer: []
      responses:
        200:
          description: "User preferences"
    put:
      tags: ["User"]
      summary: "Update User Preferences"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateUserPreferencesRequest"
      responses:
        200:
          description: "Preferences updated"

  /users/me/documents:
    get:
      tags: ["User"]
      summary: "Get My Documents"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of documents"
    post:
      tags: ["User"]
      summary: "Upload Document"
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        - in: "formData"
          name: "file"
          type: "file"
          required: true
        - in: "formData"
          name: "document_type"
          type: "string"
          required: true
        - in: "formData"
          name: "document_name"
          type: "string"
          required: false
        - in: "formData"
          name: "description"
          type: "string"
          required: false
      responses:
        201:
          description: "Document uploaded"

  /users/profile-photo:
    post:
      tags: ["User"]
      summary: "Upload Profile Photo"
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        - in: "formData"
          name: "file"
          type: "file"
          required: true
      responses:
        200:
          description: "Profile photo updated"

  /users/me/educations:
    get:
      tags: ["User"]
      summary: "Get My Educations"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of educations"
    post:
      tags: ["User"]
      summary: "Add Education"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/AddEducationRequest"
      responses:
        201:
          description: "Education added"

  /users/me/experiences:
    get:
      tags: ["User"]
      summary: "Get My Experiences"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of experiences"
    post:
      tags: ["User"]
      summary: "Add Experience"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/AddExperienceRequest"
      responses:
        201:
          description: "Experience added"

  /users/me/skills:
    get:
      tags: ["User"]
      summary: "Get My Skills"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of skills"
    post:
      tags: ["User"]
      summary: "Add Skills"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/AddUserSkillsRequest"
      responses:
        201:
          description: "Skills added"

  /users/me/projects:
    get:
      tags: ["User"]
      summary: "Get My Projects"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of projects"

  /users/me/certifications:
    get:
      tags: ["User"]
      summary: "Get My Certifications"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of certifications"

  /users/me/languages:
    get:
      tags: ["User"]
      summary: "Get My Languages"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of languages"

  /skills:
    get:
      tags: ["Master"]
      summary: "List Skills"
      parameters:
        - in: "query"
          name: "q"
          type: "string"
      responses:
        200:
          description: "List of skills"

  /skills/search:
    get:
      tags: ["Master"]
      summary: "Search Skills"
      parameters:
        - in: "query"
          name: "q"
          type: "string"
          required: true
      responses:
        200:
          description: "List of matching skills"

  /skills/type/soft:
    get:
      tags: ["Master"]
      summary: "Get Soft Skills"
      parameters:
        - in: "query"
          name: "page"
          type: "integer"
        - in: "query"
          name: "page_size"
          type: "integer"
      responses:
        200:
          description: "List of soft skills"

  /master/skills:
    get:
      tags: ["Master"]
      summary: "List Skills (Paginated)"
      parameters:
        - in: "query"
          name: "q"
          type: "string"
        - in: "query"
          name: "page"
          type: "integer"
        - in: "query"
          name: "limit"
          type: "integer"
      responses:
        200:
          description: "List of skills"

  /master/job-titles:
    get:
      tags: ["Master"]
      summary: "List Job Titles"
      parameters:
        - in: "query"
          name: "q"
          type: "string"
        - in: "query"
          name: "limit"
          type: "integer"
      responses:
        200:
          description: "List of job titles"

  /master/job-options:
    get:
      tags: ["Master"]
      summary: "Get Job Options (Legacy)"
      responses:
        200:
          description: "Job options"

  /master/job-form/job-details:
    get:
      tags: ["Master"]
      summary: "Get Job Details Options"
      responses:
        200:
          description: "Job details options"

  /master/job-form/job-type:
    get:
      tags: ["Master"]
      summary: "Get Job Type Options"
      responses:
        200:
          description: "Job type options"

  /master/job-form/job-requirements:
    get:
      tags: ["Master"]
      summary: "Get Job Requirements Options"
      parameters:
        - in: "query"
          name: "skills_page"
          type: "integer"
        - in: "query"
          name: "skills_limit"
          type: "integer"
        - in: "query"
          name: "skills_q"
          type: "string"
      responses:
        200:
          description: "Job requirements options"

  /master/job-form/job-description:
    get:
      tags: ["Master"]
      summary: "Get Job Description Options"
      responses:
        200:
          description: "Job description options"

  /master/locations/provinces:
    get:
      tags: ["Master"]
      summary: "List Provinces"
      parameters:
        - in: "query"
          name: "active"
          type: "boolean"
        - in: "query"
          name: "search"
          type: "string"
      responses:
        200:
          description: "List of provinces"

  /master/locations/provinces/{id}:
    get:
      tags: ["Master"]
      summary: "Get Province"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Province details"

  /master/locations/cities:
    get:
      tags: ["Master"]
      summary: "List Cities"
      parameters:
        - in: "query"
          name: "province_id"
          required: true
          type: "integer"
        - in: "query"
          name: "active"
          type: "boolean"
        - in: "query"
          name: "search"
          type: "string"
      responses:
        200:
          description: "List of cities"

  /master/locations/cities/{id}:
    get:
      tags: ["Master"]
      summary: "Get City"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "City details"

  /master/locations/districts:
    get:
      tags: ["Master"]
      summary: "List Districts"
      parameters:
        - in: "query"
          name: "city_id"
          required: true
          type: "integer"
        - in: "query"
          name: "active"
          type: "boolean"
        - in: "query"
          name: "search"
          type: "string"
      responses:
        200:
          description: "List of districts"

  /master/locations/districts/{id}:
    get:
      tags: ["Master"]
      summary: "Get District"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "District details"

  /master/industries:
    get:
      tags: ["Master"]
      summary: "List Industries"
      parameters:
        - in: "query"
          name: "active"
          type: "boolean"
        - in: "query"
          name: "search"
          type: "string"
      responses:
        200:
          description: "List of industries"

  /master/industries/{id}:
    get:
      tags: ["Master"]
      summary: "Get Industry"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Industry details"

  /master/company-sizes:
    get:
      tags: ["Master"]
      summary: "List Company Sizes"
      parameters:
        - in: "query"
          name: "active"
          type: "boolean"
      responses:
        200:
          description: "List of company sizes"

  /master/company-sizes/{id}:
    get:
      tags: ["Master"]
      summary: "Get Company Size"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Company size details"



  # ==========================================================
  # JOB ENDPOINTS
  # ==========================================================
  /jobs:
    get:
      tags: ["Job"]
      summary: "List Jobs"
      parameters:
        - in: "query"
          name: "q"
          type: "string"
        - in: "query"
          name: "location"
          type: "string"
        - in: "query"
          name: "job_type_ids"
          type: "array"
          items:
            type: "integer"
        - in: "query"
          name: "page"
          type: "integer"
        - in: "query"
          name: "limit"
          type: "integer"
      responses:
        200:
          description: "List of jobs"
    post:
      tags: ["Job"]
      summary: "Create Job"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/CreateJobRequest"
      responses:
        201:
          description: "Job created"

  /jobs/{id}:
    get:
      tags: ["Job"]
      summary: "Get Job Details"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Job details"
    put:
      tags: ["Job"]
      summary: "Update Job"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateJobRequest"
      responses:
        200:
          description: "Job updated"
    delete:
      tags: ["Job"]
      summary: "Delete Job"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Job deleted"

  /jobs/draft:
    post:
      tags: ["Job"]
      summary: "Save Job Draft"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/SaveJobDraftRequest"
      responses:
        200:
          description: "Draft saved"

  /jobs/my-jobs:
    get:
      tags: ["Job"]
      summary: "Get My Jobs (Employer)"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of employer's jobs"

  /jobs/search:
    post:
      tags: ["Job"]
      summary: "Search Jobs"
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            properties:
              query:
                type: string
              location:
                type: string
              job_type_ids:
                type: array
                items:
                  type: integer
      responses:
        200:
          description: "List of jobs"

  /jobs/status/active:
    get:
      tags: ["Job"]
      summary: "Get Active Jobs"
      responses:
        200:
          description: "List of active jobs"

  /jobs/status/draft:
    get:
      tags: ["Job"]
      summary: "Get Draft Jobs"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of draft jobs"

  /jobs/status/in-review:
    get:
      tags: ["Job"]
      summary: "Get Jobs In Review"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of jobs in review"

  /jobs/status/inactive:
    get:
      tags: ["Job"]
      summary: "Get Inactive Jobs"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of inactive jobs"

  /jobs/{id}/publish:
    patch:
      tags: ["Job"]
      summary: "Publish Job"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Job published"

  /jobs/{id}/close:
    patch:
      tags: ["Job"]
      summary: "Close Job"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Job closed"

  /jobs/job-types:
    get:
      tags: ["Job"]
      summary: "Get Job Types"
      responses:
        200:
          description: "List of job types"

  /jobs/job-requirements:
    get:
      tags: ["Job"]
      summary: "Get Job Requirements"
      responses:
        200:
          description: "List of job requirements"

  # ==========================================================
  # APPLICATION ENDPOINTS
  # ==========================================================
  /applications:
    post:
      tags: ["Application"]
      summary: "Submit Application"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ApplyJobRequest"
      responses:
        201:
          description: "Application submitted"

  /applications/my-applications:
    get:
      tags: ["Application"]
      summary: "My Applications"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of applications"

  /applications/{id}/status:
    patch:
      tags: ["Application"]
      summary: "Update Application Status"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateApplicationStatusRequest"
      responses:
        200:
          description: "Status updated"

  /applications/{id}/interviews:
    post:
      tags: ["Application"]
      summary: "Schedule Interview"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ScheduleInterviewRequest"
      responses:
        201:
          description: "Interview scheduled"

  /applications/jobs/{job_id}/apply:
    post:
      tags: ["Application"]
      summary: "Apply for Job"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "job_id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ApplyJobRequest"
      responses:
        201:
          description: "Application submitted"

  /applications/{id}:
    get:
      tags: ["Application"]
      summary: "Get Application Details"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Application details"

  /applications/{id}/withdraw:
    delete:
      tags: ["Application"]
      summary: "Withdraw Application"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Application withdrawn"

  /applications/{id}/documents:
    post:
      tags: ["Application"]
      summary: "Upload Application Document"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UploadApplicationDocumentRequest"
      responses:
        201:
          description: "Document uploaded"

  /applications/{id}/rate:
    post:
      tags: ["Application"]
      summary: "Rate Application Experience"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/RateApplicationExperienceRequest"
      responses:
        201:
          description: "Rating submitted"

  /applications/job/{job_id}:
    get:
      tags: ["Application"]
      summary: "Get Applications by Job (Employer)"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "job_id"
          required: true
          type: "integer"
        - in: "query"
          name: "page"
          type: "integer"
        - in: "query"
          name: "limit"
          type: "integer"
      responses:
        200:
          description: "List of applications"

  /applications/search:
    post:
      tags: ["Application"]
      summary: "Search Applications (Employer)"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/ApplicationSearchRequest"
      responses:
        200:
          description: "List of applications"

  /applications/bulk-status:
    post:
      tags: ["Application"]
      summary: "Bulk Update Application Status"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/BulkUpdateApplicationsRequest"
      responses:
        200:
          description: "Applications updated"

  /applications/{id}/stage:
    patch:
      tags: ["Application"]
      summary: "Update Application Stage"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateApplicationStageRequest"
      responses:
        200:
          description: "Stage updated"

  /applications/{id}/notes:
    post:
      tags: ["Application"]
      summary: "Add Application Note"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/AddApplicationNoteRequest"
      responses:
        201:
          description: "Note added"

  /applications/{id}/notes/{note_id}:
    put:
      tags: ["Application"]
      summary: "Update Application Note"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "path"
          name: "note_id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateApplicationNoteRequest"
      responses:
        200:
          description: "Note updated"

  /applications/{id}/interviews/{interview_id}:
    put:
      tags: ["Application"]
      summary: "Update Interview"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "path"
          name: "interview_id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateInterviewRequest"
      responses:
        200:
          description: "Interview updated"
    delete:
      tags: ["Application"]
      summary: "Cancel Interview"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "path"
          name: "interview_id"
          required: true
          type: "integer"
        - in: "query"
          name: "reason"
          type: "string"
      responses:
        200:
          description: "Interview cancelled"

  /applications/{id}/interviews/{interview_id}/reschedule:
    patch:
      tags: ["Application"]
      summary: "Reschedule Interview"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "path"
          name: "interview_id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/RescheduleInterviewRequest"
      responses:
        200:
          description: "Interview rescheduled"

  /applications/{id}/interviews/{interview_id}/complete:
    patch:
      tags: ["Application"]
      summary: "Complete Interview"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "path"
          name: "interview_id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/CompleteInterviewRequest"
      responses:
        200:
          description: "Interview completed"

  /applications/{id}/bookmark:
    patch:
      tags: ["Application"]
      summary: "Bookmark Application"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Application bookmarked"

  /applications/{id}/viewed:
    patch:
      tags: ["Application"]
      summary: "Mark Application as Viewed"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Application marked as viewed"

  # ==========================================================
  # COMPANY ENDPOINTS
  # ==========================================================
  /companies:
    get:
      tags: ["Company"]
      summary: "List Companies"
      parameters:
        - in: "query"
          name: "q"
          type: "string"
        - in: "query"
          name: "industry"
          type: "string"
        - in: "query"
          name: "page"
          type: "integer"
        - in: "query"
          name: "limit"
          type: "integer"
      responses:
        200:
          description: "List of companies"
    post:
      tags: ["Company"]
      summary: "Register Company"
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        - in: "formData"
          name: "company_name"
          type: "string"
          required: true
        - in: "formData"
          name: "legal_name"
          type: "string"
        - in: "formData"
          name: "logo"
          type: "file"
      responses:
        201:
          description: "Company registered"

  /companies/my-companies:
    get:
      tags: ["Company"]
      summary: "Get My Companies"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of my companies"

  /companies/me/addresses:
    get:
      tags: ["Company"]
      summary: "Get My Company Addresses"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of addresses"
    post:
      tags: ["Company"]
      summary: "Create Company Address"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/CreateCompanyAddressRequest"
      responses:
        201:
          description: "Address created"

  /companies/me/addresses/{id}:
    put:
      tags: ["Company"]
      summary: "Update Company Address"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateCompanyAddressRequest"
      responses:
        200:
          description: "Address updated"
    delete:
      tags: ["Company"]
      summary: "Delete Company Address"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Address deleted"

  /companies/me/verification-status:
    get:
      tags: ["Company"]
      summary: "Get My Verification Status"
      security:
        - Bearer: []
      responses:
        200:
          description: "Verification status"

  /companies/me/employer:
    get:
      tags: ["Company"]
      summary: "Get My Employer Profile"
      security:
        - Bearer: []
      responses:
        200:
          description: "Employer profile"
    put:
      tags: ["Company"]
      summary: "Update My Employer Profile"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateEmployerUserRequest"
      responses:
        200:
          description: "Profile updated"

  /companies/verified:
    get:
      tags: ["Company"]
      summary: "Get Verified Companies"
      responses:
        200:
          description: "List of verified companies"

  /companies/top-rated:
    get:
      tags: ["Company"]
      summary: "Get Top Rated Companies"
      responses:
        200:
          description: "List of top rated companies"

  /companies/slug/{slug}:
    get:
      tags: ["Company"]
      summary: "Get Company by Slug"
      parameters:
        - in: "path"
          name: "slug"
          required: true
          type: "string"
      responses:
        200:
          description: "Company details"

  /companies/{id}:
    get:
      tags: ["Company"]
      summary: "Get Company Details"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Company details"
    put:
      tags: ["Company"]
      summary: "Update Company"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateCompanyRequest"
      responses:
        200:
          description: "Company updated"

  /companies/{id}/review:
    post:
      tags: ["Company"]
      summary: "Add Company Review"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/AddReviewRequest"
      responses:
        201:
          description: "Review added"

  /companies/{id}/invite-employee:
    post:
      tags: ["Company"]
      summary: "Invite Employee"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/InviteEmployeeRequest"
      responses:
        201:
          description: "Invitation sent"

  /companies/{id}/ratings:
    get:
      tags: ["Company"]
      summary: "Get Company Ratings"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Company ratings breakdown"

  /companies/{id}/profile:
    get:
      tags: ["Company"]
      summary: "Get Company Profile (Public)"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Company public profile"
    put:
      tags: ["Company"]
      summary: "Update Company Profile"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/UpdateCompanyProfileRequest"
      responses:
        200:
          description: "Company profile updated"

  /companies/{id}/followers:
    get:
      tags: ["Company"]
      summary: "Get Company Followers"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "List of followers"

  /companies/{id}/stats:
    get:
      tags: ["Company"]
      summary: "Get Company Stats"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Company statistics"

  /companies/{id}/verification-status:
    get:
      tags: ["Company"]
      summary: "Get Verification Status"
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Verification status"

  /companies/{id}/logo:
    post:
      tags: ["Company"]
      summary: "Upload Logo"
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "formData"
          name: "file"
          type: "file"
          required: true
      responses:
        200:
          description: "Logo uploaded"
    delete:
      tags: ["Company"]
      summary: "Delete Logo"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Logo deleted"

  /companies/{id}/banner:
    post:
      tags: ["Company"]
      summary: "Upload Banner"
      security:
        - Bearer: []
      consumes:
        - multipart/form-data
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "formData"
          name: "file"
          type: "file"
          required: true
      responses:
        200:
          description: "Banner uploaded"
    delete:
      tags: ["Company"]
      summary: "Delete Banner"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Banner deleted"

  /companies/{id}/profile/publish:
    post:
      tags: ["Company"]
      summary: "Publish Profile"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Profile published"

  /companies/{id}/profile/unpublish:
    post:
      tags: ["Company"]
      summary: "Unpublish Profile"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Profile unpublished"

  /companies/{id}/follow:
    post:
      tags: ["Company"]
      summary: "Follow Company"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Followed"
    delete:
      tags: ["Company"]
      summary: "Unfollow Company"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Unfollowed"

  /companies/followed:
    get:
      tags: ["Company"]
      summary: "Get Followed Companies"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of followed companies"

  /companies/{id}/verify:
    post:
      tags: ["Company"]
      summary: "Request Verification"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/RequestVerificationRequest"
      responses:
        201:
          description: "Verification requested"

  /companies/invitations/accept:
    post:
      tags: ["Company"]
      summary: "Accept Invitation"
      security:
        - Bearer: []
      parameters:
        - in: "query"
          name: "token"
          required: true
          type: "string"
      responses:
        200:
          description: "Invitation accepted"

  /companies/{id}/invitations/{invite_id}/resend:
    post:
      tags: ["Company"]
      summary: "Resend Invitation"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "path"
          name: "invite_id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Invitation resent"

  /companies/{id}/invitations/{invite_id}:
    delete:
      tags: ["Company"]
      summary: "Cancel Invitation"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "path"
          name: "invite_id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Invitation cancelled"

  # ==========================================================
  # CHAT ENDPOINTS
  # ==========================================================
  /chat/conversations:
    get:
      tags: ["Chat"]
      summary: "Get Conversations"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of conversations"
    post:
      tags: ["Chat"]
      summary: "Start Conversation"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/CreateConversationRequest"
      responses:
        201:
          description: "Conversation created"

  /chat/conversations/{id}/messages:
    get:
      tags: ["Chat"]
      summary: "Get Messages"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "string"
      responses:
        200:
          description: "List of messages"
    post:
      tags: ["Chat"]
      summary: "Send Message"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "string"
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/SendMessageRequest"
      responses:
        201:
          description: "Message sent"

  # ==========================================================
  # ADMIN ENDPOINTS
  # ==========================================================
  /admin/companies:
    get:
      tags: ["Admin"]
      summary: "List Companies (Admin)"
      security:
        - Bearer: []
      parameters:
        - in: "query"
          name: "page"
          type: "integer"
        - in: "query"
          name: "limit"
          type: "integer"
        - in: "query"
          name: "status"
          type: "string"
      responses:
        200:
          description: "List of companies"

  /admin/companies/{id}:
    get:
      tags: ["Admin"]
      summary: "Get Company Details (Admin)"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Company details"

  /admin/companies/{id}/stats:
    get:
      tags: ["Admin"]
      summary: "Get Company Stats (Admin)"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Company stats"

  /admin/companies/{id}/status:
    patch:
      tags: ["Admin"]
      summary: "Update Company Status"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            properties:
              status:
                type: string
                enum: ["verified", "rejected", "pending"]
      responses:
        200:
          description: "Status updated"

  /admin/companies/{id}/audit-logs:
    get:
      tags: ["Admin"]
      summary: "Get Company Audit Logs"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Audit logs"

  /admin/dashboard/stats:
    get:
      tags: ["Admin"]
      summary: "Get Dashboard Stats"
      security:
        - Bearer: []
      responses:
        200:
          description: "Dashboard stats"

  /admin/jobs/pending:
    get:
      tags: ["Admin"]
      summary: "Get Pending Jobs"
      security:
        - Bearer: []
      responses:
        200:
          description: "List of pending jobs"

  /admin/jobs/{id}/approve:
    patch:
      tags: ["Admin"]
      summary: "Approve Job"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Job approved"

  /admin/jobs/{id}/reject:
    patch:
      tags: ["Admin"]
      summary: "Reject Job"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            properties:
              reason:
                type: string
      responses:
        200:
          description: "Job rejected"

  /admin/master/job-titles:
    post:
      tags: ["Admin"]
      summary: "Create Job Title"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            properties:
              name:
                type: string
      responses:
        201:
          description: "Job title created"

  /admin/master/job-titles/{id}:
    put:
      tags: ["Admin"]
      summary: "Update Job Title"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            properties:
              name:
                type: string
      responses:
        200:
          description: "Job title updated"
    delete:
      tags: ["Admin"]
      summary: "Delete Job Title"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Job title deleted"

  # ==========================================================
  # NOTIFICATION ENDPOINTS
  # ==========================================================
  /device-tokens:
    post:
      tags: ["Notification"]
      summary: "Register Device Token"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/RegisterDeviceTokenRequest"
      responses:
        201:
          description: "Token registered"
    get:
      tags: ["Notification"]
      summary: "Get My Device Tokens"
      security:
        - Bearer: []
      parameters:
        - in: "query"
          name: "page"
          type: "integer"
        - in: "query"
          name: "page_size"
          type: "integer"
        - in: "query"
          name: "platform"
          type: "string"
          enum: ["android", "ios", "web"]
        - in: "query"
          name: "is_active"
          type: "boolean"
      responses:
        200:
          description: "List of device tokens"

  /device-tokens/stats:
    get:
      tags: ["Notification"]
      summary: "Get Device Token Stats"
      security:
        - Bearer: []
      responses:
        200:
          description: "Device token statistics"

  /device-tokens/{id}:
    get:
      tags: ["Notification"]
      summary: "Get Device Token by ID"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
      responses:
        200:
          description: "Device token details"

  /device-tokens/{token}:
    delete:
      tags: ["Notification"]
      summary: "Unregister Device Token"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "token"
          required: true
          type: "string"
      responses:
        200:
          description: "Device token unregistered"

  /device-tokens/validate:
    post:
      tags: ["Notification"]
      summary: "Validate Device Token"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: object
            required: ["token"]
            properties:
              token:
                type: string
      responses:
        200:
          description: "Device token is valid"

  /push/send/device:
    post:
      tags: ["Notification"]
      summary: "Send Push to Device"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            $ref: "#/definitions/SendPushToDeviceRequest"
      responses:
        200:
          description: "Notification sent"
  /push/send/user/{id}:
    post:
      tags: ["Notification"]
      summary: "Send Push to All User Devices"
      security:
        - Bearer: []
      parameters:
        - in: "path"
          name: "id"
          required: true
          type: "integer"
        - in: "body"
          name: "body"
          required: true
          schema:
            type: "object"
            required: ["title", "body"]
            properties:
              title:
                type: "string"
              body:
                type: "string"
              data:
                type: "string"
      responses:
        200:
          description: "Notification sent"

  /push/send/batch:
    post:
      tags: ["Notification"]
      summary: "Send Push to Multiple Users"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: "object"
            required: ["user_ids", "title", "body"]
            properties:
              user_ids:
                type: "array"
                items:
                  type: "integer"
              title:
                type: "string"
              body:
                type: "string"
              data:
                type: "string"
      responses:
        200:
          description: "Batch notification sent"

  /push/send/topic:
    post:
      tags: ["Notification"]
      summary: "Send Push to Topic Subscribers"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: "object"
            required: ["topic", "title", "body"]
            properties:
              topic:
                type: "string"
              title:
                type: "string"
              body:
                type: "string"
              data:
                type: "string"
      responses:
        200:
          description: "Topic notification sent"

  /push/test:
    post:
      tags: ["Notification"]
      summary: "Send Test Notification"
      security:
        - Bearer: []
      parameters:
        - in: "body"
          name: "body"
          required: true
          schema:
            type: "object"
            required: ["token"]
            properties:
              token:
                type: "string"
      responses:
        200:
          description: "Test notification sent"

definitions:
  # Auth
  RegisterRequest:
    type: object
    required:
      - full_name
      - email
      - password
      - user_type
    properties:
      full_name:
        type: string
        minLength: 3
        maxLength: 150
      email:
        type: string
        maxLength: 150
      phone:
        type: string
        minLength: 10
        maxLength: 20
      password:
        type: string
        minLength: 8
        maxLength: 72
      user_type:
        type: string
        enum: ["jobseeker", "employer"]

  LoginRequest:
    type: object
    required:
      - email
      - password
    properties:
      email:
        type: string
      password:
        type: string

  VerifyEmailRequest:
    type: object
    required:
      - token
    properties:
      token:
        type: string

  ForgotPasswordRequest:
    type: object
    required:
      - email
    properties:
      email:
        type: string

  ResetPasswordRequest:
    type: object
    required:
      - token
      - new_password
    properties:
      token:
        type: string
      new_password:
        type: string
        minLength: 8
        maxLength: 72

  UpdateCompanyProfileRequest:
    type: "object"
    properties:
      founded_year:
        type: "integer"
      employee_count:
        type: "integer"
      description:
        type: "string"
      mission:
        type: "string"
      vision:
        type: "string"
      core_values:
        type: "string"
      facebook_url:
        type: "string"
      twitter_url:
        type: "string"
      linkedin_url:
        type: "string"
      instagram_url:
        type: "string"
      youtube_url:
        type: "string"
      awards:
        type: "string"
      certifications:
        type: "string"

  UpdateReviewRequest:
    type: "object"
    properties:
      rating_overall:
        type: "number"
      rating_culture:
        type: "number"
      rating_work_life:
        type: "number"
      rating_salary:
        type: "number"
      rating_management:
        type: "number"
      pros:
        type: "string"
      cons:
        type: "string"
      advice_to_management:
        type: "string"
      recommend_to_friend:
        type: "boolean"

  UpdateEmployeeRequest:
    type: "object"
    properties:
      position:
        type: "string"
      role:
        type: "string"
        enum: ["admin", "hr", "recruiter", "manager", "viewer"]
      is_active:
        type: "boolean"


  CreateCompanyAddressRequest:
    type: "object"
    properties:
      full_address:
        type: "string"
      latitude:
        type: "number"
      longitude:
        type: "number"
      province_id:
        type: "integer"
      city_id:
        type: "integer"
      district_id:
        type: "integer"

  UpdateCompanyAddressRequest:
    type: "object"
    properties:
      full_address:
        type: "string"
      latitude:
        type: "number"
      longitude:
        type: "number"
      province_id:
        type: "integer"
      city_id:
        type: "integer"
      district_id:
        type: "integer"

  UpdateEmployerUserRequest:
    type: "object"
    properties:
      name:
        type: "string"
      position_title:
        type: "string"
      province_id:
        type: "integer"
      city_id:
        type: "integer"
      district_id:
        type: "integer"

  UploadApplicationDocumentRequest:
    type: "object"
    properties:
      document_type:
        type: "string"
        enum: ["resume", "cover_letter", "certificate", "portfolio", "other"]
      document_url:
        type: "string"
      file_name:
        type: "string"
      file_size:
        type: "integer"
      description:
        type: "string"

  RateApplicationExperienceRequest:
    type: "object"
    properties:
      rating:
        type: "integer"
        minimum: 1
        maximum: 5
      feedback:
        type: "string"

  BulkUpdateApplicationsRequest:
    type: "object"
    properties:
      application_ids:
        type: "array"
        items:
          type: "integer"
      status:
        type: "string"
      notes:
        type: "string"

  AddApplicationNoteRequest:
    type: "object"
    properties:
      note_text:
        type: "string"
      visibility:
        type: "string"
        enum: ["internal", "public"]
      sentiment:
        type: "string"
        enum: ["positive", "neutral", "negative"]
      is_pinned:
        type: "boolean"

  UpdateApplicationNoteRequest:
    type: "object"
    properties:
      note_text:
        type: "string"
      visibility:
        type: "string"
        enum: ["internal", "public"]
      sentiment:
        type: "string"
        enum: ["positive", "neutral", "negative"]
      is_pinned:
        type: "boolean"

  UpdateApplicationStageRequest:
    type: "object"
    properties:
      stage_name:
        type: "string"
      stage_order:
        type: "integer"
      description:
        type: "string"
      notes:
        type: "string"

  ApplicationSearchRequest:
    type: "object"
    properties:
      query:
        type: "string"
      job_id:
        type: "integer"
      company_id:
        type: "integer"
      user_id:
        type: "integer"
      status:
        type: "string"
        enum: ["pending", "screening", "shortlisted", "interview", "offered", "rejected", "withdrawn"]
      applied_from:
        type: "string"
        format: "date-time"
      applied_to:
        type: "string"
        format: "date-time"
      min_salary:
        type: "number"
      max_salary:
        type: "number"
      has_interview:
        type: "boolean"
      interview_status:
        type: "string"
        enum: ["scheduled", "rescheduled", "completed", "cancelled", "no_show"]
      sort_by:
        type: "string"
        enum: ["created_at", "updated_at", "applied_date", "status"]
      sort_order:
        type: "string"
        enum: ["asc", "desc"]
      page:
        type: "integer"
      limit:
        type: "integer"
  RefreshTokenRequest:
    type: object
    required:
      - refresh_token
    properties:
      refresh_token:
        type: string

  AuthResponse:
    type: object
    properties:
      access_token:
        type: string
      refresh_token:
        type: string
      expires_in:
        type: integer

  # User
  UserProfile:
    type: object
    properties:
      id:
        type: integer
      email:
        type: string
      full_name:
        type: string
      avatar_url:
        type: string

  UpdateProfileRequest:
    type: object
    properties:
      full_name:
        type: string
        minLength: 3
        maxLength: 150
      phone:
        type: string
        minLength: 10
        maxLength: 20
      headline:
        type: string
        maxLength: 150
      bio:
        type: string
      gender:
        type: string
        enum: ["male", "female", "other"]
      linkedin_url:
        type: string
      portfolio_url:
        type: string

  UpdateUserPreferencesRequest:
    type: object
    properties:
      language_preference:
        type: string
      theme_preference:
        type: string
        enum: ["light", "dark"]
      email_notifications:
        type: boolean
      push_notifications:
        type: boolean

  AddEducationRequest:
    type: object
    required:
      - institution_name
    properties:
      institution_name:
        type: string
        maxLength: 200
      major:
        type: string
        maxLength: 150
      degree_level:
        type: string
        maxLength: 100
      start_year:
        type: integer
        minimum: 1900
      end_year:
        type: integer
        minimum: 1900
      gpa:
        type: number
        minimum: 0
        maximum: 4
      is_current:
        type: boolean

  AddExperienceRequest:
    type: object
    required:
      - company_name
      - position_title
      - start_date
    properties:
      company_name:
        type: string
        maxLength: 200
      position_title:
        type: string
        maxLength: 150
      employment_type:
        type: string
        enum: ["full-time", "part-time", "contract", "internship", "freelance"]
      start_date:
        type: string
      end_date:
        type: string
      is_current:
        type: boolean
      description:
        type: string

  AddUserSkillsRequest:
    type: object
    required:
      - skills
    properties:
      skills:
        type: array
        items:
          $ref: "#/definitions/AddUserSkillRequest"

  AddUserSkillRequest:
    type: object
    properties:
      skill_id:
        type: integer
      skill_name:
        type: string
      proficiency_level:
        type: string
        enum: ["beginner", "intermediate", "advanced", "expert"]
      years_of_experience:
        type: integer

  # Job
  CreateJobRequest:
    type: object
    required:
      - company_id
      - description
      - job_type_id
      - work_policy_id
      - salary_min
      - salary_max
      - skills
    properties:
      company_id:
        type: integer
        minimum: 1
      description:
        type: string
        minLength: 50
      job_category_id:
        type: integer
      job_title_id:
        type: integer
      job_type_id:
        type: integer
      work_policy_id:
        type: integer
      education_level_id:
        type: integer
      experience_level_id:
        type: integer
      gender_preference_id:
        type: integer
      salary_min:
        type: number
        minimum: 0
      salary_max:
        type: number
        minimum: 0
      skills:
        type: array
        items:
          $ref: "#/definitions/AddSkillRequest"

  AddSkillRequest:
    type: object
    required:
      - skill_id
    properties:
      skill_id:
        type: integer
      importance_level:
        type: string
        enum: ["required", "preferred", "optional"]

  UpdateJobRequest:
    type: object
    properties:
      description:
        type: string
        minLength: 50
      salary_min:
        type: number
      salary_max:
        type: number
      min_age:
        type: integer
      max_age:
        type: integer

  SaveJobDraftRequest:
    type: object
    required:
      - company_id
      - description
    properties:
      company_id:
        type: integer
      description:
        type: string
      job_title_id:
        type: integer
      salary_min:
        type: number
      salary_max:
        type: number

  # Application
  ApplyJobRequest:
    type: object
    required:
      - job_id
    properties:
      job_id:
        type: integer
      resume_url:
        type: string
      cover_letter:
        type: string
        maxLength: 2000
      source:
        type: string

  UpdateApplicationStatusRequest:
    type: object
    required:
      - status
    properties:
      status:
        type: string
        enum: ["pending", "screening", "shortlisted", "interview", "offered", "rejected", "withdrawn"]
      notes:
        type: string
      rejection_reason:
        type: string

  ScheduleInterviewRequest:
    type: object
    required:
      - application_id
      - scheduled_at
    properties:
      application_id:
        type: integer
      scheduled_at:
        type: string
        format: date-time
      interview_type:
        type: string
        enum: ["online", "onsite", "hybrid"]
      meeting_link:
        type: string
      location:
        type: string
      notes:
        type: string

  UpdateInterviewRequest:
    type: object
    properties:
      interview_type:
        type: string
        enum: ["online", "onsite", "hybrid"]
      scheduled_at:
        type: string
        format: date-time
      meeting_link:
        type: string
      location:
        type: string
      notes:
        type: string

  RescheduleInterviewRequest:
    type: object
    required:
      - scheduled_at
    properties:
      scheduled_at:
        type: string
        format: date-time
      reason:
        type: string
      meeting_link:
        type: string
      location:
        type: string

  CompleteInterviewRequest:
    type: object
    properties:
      overall_score:
        type: number
        minimum: 0
        maximum: 100
      technical_score:
        type: number
        minimum: 0
        maximum: 100
      communication_score:
        type: number
        minimum: 0
        maximum: 100
      personality_score:
        type: number
        minimum: 0
        maximum: 100
      remarks:
        type: string
      feedback_summary:
        type: string

  # Company
  RegisterCompanyRequest:
    type: object
    required:
      - company_name
    properties:
      company_name:
        type: string
        minLength: 2
        maxLength: 200
      legal_name:
        type: string
        maxLength: 200
      industry_id:
        type: integer
      description:
        type: string
      website_url:
        type: string

  UpdateCompanyRequest:
    type: object
    required:
      - short_description
      - company_description
    properties:
      short_description:
        type: string
        maxLength: 1000
      company_description:
        type: string
      website_url:
        type: string
      instagram_url:
        type: string
      linkedin_url:
        type: string

  AddReviewRequest:
    type: object
    required:
      - rating_overall
    properties:
      rating_overall:
        type: number
        minimum: 1
        maximum: 5
      pros:
        type: string
      cons:
        type: string
      is_anonymous:
        type: boolean

  InviteEmployeeRequest:
    type: object
    required:
      - email
      - full_name
      - position
      - role
    properties:
      email:
        type: string
      full_name:
        type: string
      position:
        type: string
      role:
        type: string
        enum: ["admin", "hr", "recruiter", "manager", "viewer"]

  # Chat
  CreateConversationRequest:
    type: object
    required:
      - recipient_id
    properties:
      recipient_id:
        type: integer

  SendMessageRequest:
    type: object
    required:
      - content
    properties:
      content:
        type: string
        maxLength: 5000

  # Notification
  RegisterDeviceTokenRequest:
    type: object
    required:
      - token
      - platform
    properties:
      token:
        type: string
        minLength: 10
        maxLength: 4096
      platform:
        type: string
        enum: ["android", "ios", "web"]
      device_info:
        type: string

  SendPushToDeviceRequest:
    type: object
    required:
      - token
      - title
      - body
    properties:
      token:
        type: string
      title:
        type: string
      body:
        type: string
      data:
        type: string

  # Auth OTP
  RequestOTPRequest:
    type: object
    required:
      - contact
    properties:
      contact:
        type: string
        format: email
      purpose:
        type: string
        enum: ["login", "verify_email", "reset_password"]

  VerifyOTPRequest:
    type: object
    required:
      - contact
      - otp
    properties:
      contact:
        type: string
        format: email
      otp:
        type: string
        minLength: 6
        maxLength: 6
      purpose:
        type: string
        enum: ["login", "verify_email", "reset_password"]

  RegisterWithOTPRequest:
    type: object
    required:
      - full_name
      - email
      - password
      - user_type
    properties:
      full_name:
        type: string
        minLength: 3
        maxLength: 150
      email:
        type: string
        format: email
        maxLength: 150
      phone:
        type: string
        minLength: 10
        maxLength: 20
      password:
        type: string
        minLength: 8
        maxLength: 72
      user_type:
        type: string
        enum: ["jobseeker", "employer"]

  VerifyEmailOTPRequest:
    type: object
    required:
      - email
      - otp_code
    properties:
      email:
        type: string
        format: email
      otp_code:
        type: string
        minLength: 6
        maxLength: 6

  ResendOTPRequest:
    type: object
    required:
      - email
    properties:
      email:
        type: string
        format: email

  ForgotPasswordOTPRequest:
    type: object
    required:
      - email
    properties:
      email:
        type: string
        format: email

  ResetPasswordOTPRequest:
    type: object
    required:
      - email
      - otp_code
      - new_password
    properties:
      email:
        type: string
        format: email
      otp_code:
        type: string
        minLength: 6
        maxLength: 6
      new_password:
        type: string
        minLength: 8
        maxLength: 72

  # Admin Auth
  AdminLoginRequest:
    type: object
    required:
      - email
      - password
    properties:
      email:
        type: string
        format: email
        maxLength: 150
      password:
        type: string
        minLength: 6
        maxLength: 100

  # Admin Company
  AdminUpdateCompanyStatusRequest:
    type: object
    required:
      - status
    properties:
      status:
        type: string
        enum: ["pending_verification", "verified", "rejected", "suspended", "blacklisted"]
      rejection_reason:
        type: string
        maxLength: 1000
      notes:
        type: string
        maxLength: 2000
      grant_badge:
        type: boolean

  # Company Verification
  RequestVerificationRequest:
    type: object
    required:
      - npwp_number
    properties:
      npwp_number:
        type: string
      nib_number:
        type: string
      notes:
        type: string
